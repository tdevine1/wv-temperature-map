{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nfunction isErrorResponse(errorResponse) {\n  return errorResponse && typeof errorResponse.error === \"string\" && typeof errorResponse.error_description === \"string\";\n}\n/**\n * The Error.name value of an CredentialUnavailable\n */\nexport const CredentialUnavailableErrorName = \"CredentialUnavailableError\";\n/**\n * This signifies that the credential that was tried in a chained credential\n * was not available to be used as the credential. Rather than treating this as\n * an error that should halt the chain, it's caught and the chain continues\n */\nexport class CredentialUnavailableError extends Error {\n  constructor(message, options) {\n    // @ts-expect-error - TypeScript does not recognize this until we use ES2022 as the target; however, all our major runtimes do support the `cause` property\n    super(message, options);\n    this.name = CredentialUnavailableErrorName;\n  }\n}\n/**\n * The Error.name value of an AuthenticationError\n */\nexport const AuthenticationErrorName = \"AuthenticationError\";\n/**\n * Provides details about a failure to authenticate with Azure Active\n * Directory.  The `errorResponse` field contains more details about\n * the specific failure.\n */\nexport class AuthenticationError extends Error {\n  constructor(statusCode, errorBody, options) {\n    let errorResponse = {\n      error: \"unknown\",\n      errorDescription: \"An unknown error occurred and no additional details are available.\"\n    };\n    if (isErrorResponse(errorBody)) {\n      errorResponse = convertOAuthErrorResponseToErrorResponse(errorBody);\n    } else if (typeof errorBody === \"string\") {\n      try {\n        // Most error responses will contain JSON-formatted error details\n        // in the response body\n        const oauthErrorResponse = JSON.parse(errorBody);\n        errorResponse = convertOAuthErrorResponseToErrorResponse(oauthErrorResponse);\n      } catch (e) {\n        if (statusCode === 400) {\n          errorResponse = {\n            error: \"invalid_request\",\n            errorDescription: `The service indicated that the request was invalid.\\n\\n${errorBody}`\n          };\n        } else {\n          errorResponse = {\n            error: \"unknown_error\",\n            errorDescription: `An unknown error has occurred. Response body:\\n\\n${errorBody}`\n          };\n        }\n      }\n    } else {\n      errorResponse = {\n        error: \"unknown_error\",\n        errorDescription: \"An unknown error occurred and no additional details are available.\"\n      };\n    }\n    super(`${errorResponse.error} Status code: ${statusCode}\\nMore details:\\n${errorResponse.errorDescription},`,\n    // @ts-expect-error - TypeScript does not recognize this until we use ES2022 as the target; however, all our major runtimes do support the `cause` property\n    options);\n    this.statusCode = statusCode;\n    this.errorResponse = errorResponse;\n    // Ensure that this type reports the correct name\n    this.name = AuthenticationErrorName;\n  }\n}\n/**\n * The Error.name value of an AggregateAuthenticationError\n */\nexport const AggregateAuthenticationErrorName = \"AggregateAuthenticationError\";\n/**\n * Provides an `errors` array containing {@link AuthenticationError} instance\n * for authentication failures from credentials in a {@link ChainedTokenCredential}.\n */\nexport class AggregateAuthenticationError extends Error {\n  constructor(errors, errorMessage) {\n    const errorDetail = errors.join(\"\\n\");\n    super(`${errorMessage}\\n${errorDetail}`);\n    this.errors = errors;\n    // Ensure that this type reports the correct name\n    this.name = AggregateAuthenticationErrorName;\n  }\n}\nfunction convertOAuthErrorResponseToErrorResponse(errorBody) {\n  return {\n    error: errorBody.error,\n    errorDescription: errorBody.error_description,\n    correlationId: errorBody.correlation_id,\n    errorCodes: errorBody.error_codes,\n    timestamp: errorBody.timestamp,\n    traceId: errorBody.trace_id\n  };\n}\n/**\n * Error used to enforce authentication after trying to retrieve a token silently.\n */\nexport class AuthenticationRequiredError extends Error {\n  constructor(\n  /**\n   * Optional parameters. A message can be specified. The {@link GetTokenOptions} of the request can also be specified to more easily associate the error with the received parameters.\n   */\n  options) {\n    super(options.message,\n    // @ts-expect-error - TypeScript does not recognize this until we use ES2022 as the target; however, all our major runtimes do support the `cause` property\n    options.cause ? {\n      cause: options.cause\n    } : undefined);\n    this.scopes = options.scopes;\n    this.getTokenOptions = options.getTokenOptions;\n    this.name = \"AuthenticationRequiredError\";\n  }\n}","map":{"version":3,"names":["isErrorResponse","errorResponse","error","error_description","CredentialUnavailableErrorName","CredentialUnavailableError","Error","constructor","message","options","name","AuthenticationErrorName","AuthenticationError","statusCode","errorBody","errorDescription","convertOAuthErrorResponseToErrorResponse","oauthErrorResponse","JSON","parse","e","AggregateAuthenticationErrorName","AggregateAuthenticationError","errors","errorMessage","errorDetail","join","correlationId","correlation_id","errorCodes","error_codes","timestamp","traceId","trace_id","AuthenticationRequiredError","cause","undefined","scopes","getTokenOptions"],"sources":["C:\\Users\\phlos\\wv-temperature-map\\src\\backend\\node_modules\\@azure\\identity\\src\\errors.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { GetTokenOptions } from \"@azure/core-auth\";\n\n/**\n * See the official documentation for more details:\n *\n * https://learn.microsoft.com/en-us/azure/active-directory/develop/v1-protocols-oauth-code#error-response-1\n *\n * NOTE: This documentation is for v1 OAuth support but the same error\n * response details still apply to v2.\n */\nexport interface ErrorResponse {\n  /**\n   * The string identifier for the error.\n   */\n  error: string;\n\n  /**\n   * The error's description.\n   */\n  errorDescription: string;\n\n  /**\n   * An array of codes pertaining to the error(s) that occurred.\n   */\n  errorCodes?: number[];\n\n  /**\n   * The timestamp at which the error occurred.\n   */\n  timestamp?: string;\n\n  /**\n   * The trace identifier for this error occurrence.\n   */\n  traceId?: string;\n\n  /**\n   * The correlation ID to be used for tracking the source of the error.\n   */\n  correlationId?: string;\n}\n\n/**\n * Used for internal deserialization of OAuth responses. Public model is ErrorResponse\n * @internal\n */\nexport interface OAuthErrorResponse {\n  error: string;\n  error_description: string;\n  error_codes?: number[];\n  timestamp?: string;\n  trace_id?: string;\n  correlation_id?: string;\n}\n\nfunction isErrorResponse(errorResponse: any): errorResponse is OAuthErrorResponse {\n  return (\n    errorResponse &&\n    typeof errorResponse.error === \"string\" &&\n    typeof errorResponse.error_description === \"string\"\n  );\n}\n\n/**\n * The Error.name value of an CredentialUnavailable\n */\nexport const CredentialUnavailableErrorName = \"CredentialUnavailableError\";\n\n/**\n * This signifies that the credential that was tried in a chained credential\n * was not available to be used as the credential. Rather than treating this as\n * an error that should halt the chain, it's caught and the chain continues\n */\nexport class CredentialUnavailableError extends Error {\n  constructor(message?: string, options?: { cause?: unknown }) {\n    // @ts-expect-error - TypeScript does not recognize this until we use ES2022 as the target; however, all our major runtimes do support the `cause` property\n    super(message, options);\n    this.name = CredentialUnavailableErrorName;\n  }\n}\n\n/**\n * The Error.name value of an AuthenticationError\n */\nexport const AuthenticationErrorName = \"AuthenticationError\";\n\n/**\n * Provides details about a failure to authenticate with Azure Active\n * Directory.  The `errorResponse` field contains more details about\n * the specific failure.\n */\nexport class AuthenticationError extends Error {\n  /**\n   * The HTTP status code returned from the authentication request.\n   */\n  public readonly statusCode: number;\n\n  /**\n   * The error response details.\n   */\n  public readonly errorResponse: ErrorResponse;\n\n  constructor(\n    statusCode: number,\n    errorBody: object | string | undefined | null,\n    options?: { cause?: unknown },\n  ) {\n    let errorResponse: ErrorResponse = {\n      error: \"unknown\",\n      errorDescription: \"An unknown error occurred and no additional details are available.\",\n    };\n\n    if (isErrorResponse(errorBody)) {\n      errorResponse = convertOAuthErrorResponseToErrorResponse(errorBody);\n    } else if (typeof errorBody === \"string\") {\n      try {\n        // Most error responses will contain JSON-formatted error details\n        // in the response body\n        const oauthErrorResponse: OAuthErrorResponse = JSON.parse(errorBody);\n        errorResponse = convertOAuthErrorResponseToErrorResponse(oauthErrorResponse);\n      } catch (e: any) {\n        if (statusCode === 400) {\n          errorResponse = {\n            error: \"invalid_request\",\n            errorDescription: `The service indicated that the request was invalid.\\n\\n${errorBody}`,\n          };\n        } else {\n          errorResponse = {\n            error: \"unknown_error\",\n            errorDescription: `An unknown error has occurred. Response body:\\n\\n${errorBody}`,\n          };\n        }\n      }\n    } else {\n      errorResponse = {\n        error: \"unknown_error\",\n        errorDescription: \"An unknown error occurred and no additional details are available.\",\n      };\n    }\n\n    super(\n      `${errorResponse.error} Status code: ${statusCode}\\nMore details:\\n${errorResponse.errorDescription},`,\n      // @ts-expect-error - TypeScript does not recognize this until we use ES2022 as the target; however, all our major runtimes do support the `cause` property\n      options,\n    );\n    this.statusCode = statusCode;\n    this.errorResponse = errorResponse;\n\n    // Ensure that this type reports the correct name\n    this.name = AuthenticationErrorName;\n  }\n}\n\n/**\n * The Error.name value of an AggregateAuthenticationError\n */\nexport const AggregateAuthenticationErrorName = \"AggregateAuthenticationError\";\n\n/**\n * Provides an `errors` array containing {@link AuthenticationError} instance\n * for authentication failures from credentials in a {@link ChainedTokenCredential}.\n */\nexport class AggregateAuthenticationError extends Error {\n  /**\n   * The array of error objects that were thrown while trying to authenticate\n   * with the credentials in a {@link ChainedTokenCredential}.\n   */\n  public errors: any[];\n\n  constructor(errors: any[], errorMessage?: string) {\n    const errorDetail = errors.join(\"\\n\");\n    super(`${errorMessage}\\n${errorDetail}`);\n    this.errors = errors;\n\n    // Ensure that this type reports the correct name\n    this.name = AggregateAuthenticationErrorName;\n  }\n}\n\nfunction convertOAuthErrorResponseToErrorResponse(errorBody: OAuthErrorResponse): ErrorResponse {\n  return {\n    error: errorBody.error,\n    errorDescription: errorBody.error_description,\n    correlationId: errorBody.correlation_id,\n    errorCodes: errorBody.error_codes,\n    timestamp: errorBody.timestamp,\n    traceId: errorBody.trace_id,\n  };\n}\n\n/**\n * Optional parameters to the {@link AuthenticationRequiredError}\n */\nexport interface AuthenticationRequiredErrorOptions {\n  /**\n   * The list of scopes for which the token will have access.\n   */\n  scopes: string[];\n  /**\n   * The options passed to the getToken request.\n   */\n  getTokenOptions?: GetTokenOptions;\n  /**\n   * The message of the error.\n   */\n  message?: string;\n  /**\n   * The underlying cause, if any, that caused the authentication to fail.\n   */\n  cause?: unknown;\n}\n\n/**\n * Error used to enforce authentication after trying to retrieve a token silently.\n */\nexport class AuthenticationRequiredError extends Error {\n  /**\n   * The list of scopes for which the token will have access.\n   */\n  public scopes: string[];\n  /**\n   * The options passed to the getToken request.\n   */\n  public getTokenOptions?: GetTokenOptions;\n\n  constructor(\n    /**\n     * Optional parameters. A message can be specified. The {@link GetTokenOptions} of the request can also be specified to more easily associate the error with the received parameters.\n     */\n    options: AuthenticationRequiredErrorOptions,\n  ) {\n    super(\n      options.message,\n      // @ts-expect-error - TypeScript does not recognize this until we use ES2022 as the target; however, all our major runtimes do support the `cause` property\n      options.cause ? { cause: options.cause } : undefined,\n    );\n    this.scopes = options.scopes;\n    this.getTokenOptions = options.getTokenOptions;\n    this.name = \"AuthenticationRequiredError\";\n  }\n}\n"],"mappings":"AAAA;AACA;AAyDA,SAASA,eAAeA,CAACC,aAAkB;EACzC,OACEA,aAAa,IACb,OAAOA,aAAa,CAACC,KAAK,KAAK,QAAQ,IACvC,OAAOD,aAAa,CAACE,iBAAiB,KAAK,QAAQ;AAEvD;AAEA;;;AAGA,OAAO,MAAMC,8BAA8B,GAAG,4BAA4B;AAE1E;;;;;AAKA,OAAM,MAAOC,0BAA2B,SAAQC,KAAK;EACnDC,YAAYC,OAAgB,EAAEC,OAA6B;IACzD;IACA,KAAK,CAACD,OAAO,EAAEC,OAAO,CAAC;IACvB,IAAI,CAACC,IAAI,GAAGN,8BAA8B;EAC5C;;AAGF;;;AAGA,OAAO,MAAMO,uBAAuB,GAAG,qBAAqB;AAE5D;;;;;AAKA,OAAM,MAAOC,mBAAoB,SAAQN,KAAK;EAW5CC,YACEM,UAAkB,EAClBC,SAA6C,EAC7CL,OAA6B;IAE7B,IAAIR,aAAa,GAAkB;MACjCC,KAAK,EAAE,SAAS;MAChBa,gBAAgB,EAAE;KACnB;IAED,IAAIf,eAAe,CAACc,SAAS,CAAC,EAAE;MAC9Bb,aAAa,GAAGe,wCAAwC,CAACF,SAAS,CAAC;IACrE,CAAC,MAAM,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAAE;MACxC,IAAI;QACF;QACA;QACA,MAAMG,kBAAkB,GAAuBC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;QACpEb,aAAa,GAAGe,wCAAwC,CAACC,kBAAkB,CAAC;MAC9E,CAAC,CAAC,OAAOG,CAAM,EAAE;QACf,IAAIP,UAAU,KAAK,GAAG,EAAE;UACtBZ,aAAa,GAAG;YACdC,KAAK,EAAE,iBAAiB;YACxBa,gBAAgB,EAAE,0DAA0DD,SAAS;WACtF;QACH,CAAC,MAAM;UACLb,aAAa,GAAG;YACdC,KAAK,EAAE,eAAe;YACtBa,gBAAgB,EAAE,oDAAoDD,SAAS;WAChF;QACH;MACF;IACF,CAAC,MAAM;MACLb,aAAa,GAAG;QACdC,KAAK,EAAE,eAAe;QACtBa,gBAAgB,EAAE;OACnB;IACH;IAEA,KAAK,CACH,GAAGd,aAAa,CAACC,KAAK,iBAAiBW,UAAU,oBAAoBZ,aAAa,CAACc,gBAAgB,GAAG;IACtG;IACAN,OAAO,CACR;IACD,IAAI,CAACI,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACZ,aAAa,GAAGA,aAAa;IAElC;IACA,IAAI,CAACS,IAAI,GAAGC,uBAAuB;EACrC;;AAGF;;;AAGA,OAAO,MAAMU,gCAAgC,GAAG,8BAA8B;AAE9E;;;;AAIA,OAAM,MAAOC,4BAA6B,SAAQhB,KAAK;EAOrDC,YAAYgB,MAAa,EAAEC,YAAqB;IAC9C,MAAMC,WAAW,GAAGF,MAAM,CAACG,IAAI,CAAC,IAAI,CAAC;IACrC,KAAK,CAAC,GAAGF,YAAY,KAAKC,WAAW,EAAE,CAAC;IACxC,IAAI,CAACF,MAAM,GAAGA,MAAM;IAEpB;IACA,IAAI,CAACb,IAAI,GAAGW,gCAAgC;EAC9C;;AAGF,SAASL,wCAAwCA,CAACF,SAA6B;EAC7E,OAAO;IACLZ,KAAK,EAAEY,SAAS,CAACZ,KAAK;IACtBa,gBAAgB,EAAED,SAAS,CAACX,iBAAiB;IAC7CwB,aAAa,EAAEb,SAAS,CAACc,cAAc;IACvCC,UAAU,EAAEf,SAAS,CAACgB,WAAW;IACjCC,SAAS,EAAEjB,SAAS,CAACiB,SAAS;IAC9BC,OAAO,EAAElB,SAAS,CAACmB;GACpB;AACH;AAwBA;;;AAGA,OAAM,MAAOC,2BAA4B,SAAQ5B,KAAK;EAUpDC;EACE;;;EAGAE,OAA2C;IAE3C,KAAK,CACHA,OAAO,CAACD,OAAO;IACf;IACAC,OAAO,CAAC0B,KAAK,GAAG;MAAEA,KAAK,EAAE1B,OAAO,CAAC0B;IAAK,CAAE,GAAGC,SAAS,CACrD;IACD,IAAI,CAACC,MAAM,GAAG5B,OAAO,CAAC4B,MAAM;IAC5B,IAAI,CAACC,eAAe,GAAG7B,OAAO,CAAC6B,eAAe;IAC9C,IAAI,CAAC5B,IAAI,GAAG,6BAA6B;EAC3C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}